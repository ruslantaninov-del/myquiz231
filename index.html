<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ú–æ–π –∫–≤–∏–∑</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #89f7fe, #66a6ff);
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
    }
    .quiz-container {
      background: white;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 0 15px rgba(0,0,0,0.3);
      width: 400px;
      text-align: center;
      animation: fadeIn 0.8s ease;
    }
    h1 {
      font-size: 24px;
      margin-bottom: 15px;
    }
    .btn {
      display: block;
      margin: 8px auto;
      padding: 10px;
      width: 90%;
      border: none;
      border-radius: 10px;
      background: #4CAF50;
      color: white;
      font-size: 16px;
      cursor: pointer;
      transition: transform 0.2s, background 0.3s;
    }
    .btn:hover {
      background: #45a049;
      transform: scale(1.05);
    }
    .btn-nav {
      width: 45%;
      display: inline-block;
    }
    .result {
      font-size: 18px;
      margin-top: 15px;
    }
    @keyframes fadeIn {
      from {opacity: 0; transform: translateY(-20px);}
      to {opacity: 1; transform: translateY(0);}
    }
    input, textarea {
      width: 90%;
      margin: 5px 0;
      padding: 8px;
      border-radius: 8px;
      border: 1px solid #ccc;
    }
  </style>
</head>
<body>
  <div class="quiz-container" id="main">
    <h1>–°–æ–∑–¥–∞–π —Å–≤–æ–π –∫–≤–∏–∑ üéÆ</h1>
    <div id="creator">
      <textarea id="question" placeholder="–í–æ–ø—Ä–æ—Å..."></textarea>
      <input type="text" id="a1" placeholder="–û—Ç–≤–µ—Ç 1">
      <input type="text" id="a2" placeholder="–û—Ç–≤–µ—Ç 2">
      <input type="text" id="a3" placeholder="–û—Ç–≤–µ—Ç 3">
      <input type="text" id="a4" placeholder="–û—Ç–≤–µ—Ç 4">
      <input type="number" id="correct" placeholder="–ù–æ–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ (1-4)">
      <button class="btn" onclick="addQuestion()">–î–æ–±–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å</button>
      <button class="btn" onclick="startQuiz()">–ù–∞—á–∞—Ç—å –∫–≤–∏–∑</button>
    </div>
    <div id="quiz" style="display:none;"></div>
    <div id="nav-btns" style="display:none;">
      <button id="prev-btn" class="btn btn-nav">–ù–∞–∑–∞–¥</button>
      <button id="next-btn" class="btn btn-nav">–î–∞–ª—å—à–µ</button>
    </div>
    <div id="result" class="result"></div>
    <div id="after-quiz" style="display:none;">
      <button class="btn" onclick="restartQuiz()">–ü—Ä–æ–π—Ç–∏ —Å–Ω–æ–≤–∞ üîÑ</button>
      <button class="btn" onclick="shareQuiz()">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è üì§</button>
    </div>
  </div>

  <script>
    let questions = [];
    let currentQuestion = 0;
    let answersGiven = [];
    let score = 0;

    function addQuestion() {
      const q = document.getElementById("question").value;
      const a1 = document.getElementById("a1").value;
      const a2 = document.getElementById("a2").value;
      const a3 = document.getElementById("a3").value;
      const a4 = document.getElementById("a4").value;
      const correct = parseInt(document.getElementById("correct").value) - 1;

      if (!q || !a1 || !a2 || !a3 || !a4 || isNaN(correct)) {
        alert("–ó–∞–ø–æ–ª–Ω–∏ –≤—Å–µ –ø–æ–ª—è!");
        return;
      }

      questions.push({
        question: q,
        answers: [a1, a2, a3, a4],
        correct: correct
      });

      alert("–í–æ–ø—Ä–æ—Å –¥–æ–±–∞–≤–ª–µ–Ω!");
      document.getElementById("question").value = "";
      document.getElementById("a1").value = "";
      document.getElementById("a2").value = "";
      document.getElementById("a3").value = "";
      document.getElementById("a4").value = "";
      document.getElementById("correct").value = "";
    }

    function startQuiz() {
      if (questions.length === 0) {
        alert("–°–Ω–∞—á–∞–ª–∞ –¥–æ–±–∞–≤—å —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –≤–æ–ø—Ä–æ—Å!");
        return;
      }
      document.getElementById("creator").style.display = "none";
      document.getElementById("quiz").style.display = "block";
      document.getElementById("nav-btns").style.display = "block";
      loadQuestion();
    }

    function loadQuestion() {
      const q = questions[currentQuestion];
      const quizEl = document.getElementById("quiz");
      quizEl.innerHTML = `<h2>${q.question}</h2>`;
      q.answers.forEach((answer, i) => {
        let selected = answersGiven[currentQuestion] === i ? "style='background:#2196F3;'" : "";
        quizEl.innerHTML += `<button class="btn" ${selected} onclick="checkAnswer(${i})">${answer}</button>`;
      });
      document.getElementById("result").textContent = "";
    }

    function checkAnswer(answer) {
      answersGiven[currentQuestion] = answer;
      loadQuestion();
    }

    function showResult() {
      score = 0;
      answersGiven.forEach((ans, idx) => {
        if (ans === questions[idx].correct) score++;
      });
      document.getElementById("quiz").style.display = "none";
      document.getElementById("nav-btns").style.display = "none";
      document.getElementById("after-quiz").style.display = "block";

      let percent = Math.round((score / questions.length) * 100);
      let message = "üôÇ –ù–µ–ø–ª–æ—Ö–æ!";
      if (percent === 100) message = "üéâ –û—Ç–ª–∏—á–Ω–æ!";
      else if (percent >= 70) message = "üî• –•–æ—Ä–æ—à–æ!";
      else if (percent < 40) message = "üòÖ –ù—É–∂–Ω–æ –ø–æ—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å—Å—è!";

      document.getElementById("result").textContent =
        `–¢—ã –æ—Ç–≤–µ—Ç–∏–ª –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞ ${score} –∏–∑ ${questions.length} (${percent}%). ${message}`;
    }

    function restartQuiz() {
      currentQuestion = 0;
      answersGiven = [];
      score = 0;
      document.getElementById("after-quiz").style.display = "none";
      document.getElementById("creator").style.display = "block";
      document.getElementById("result").textContent = "";
    }

    function shareQuiz() {
      const url = window.location.href;
      navigator.clipboard.writeText(url).then(() => {
        alert("–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞! –û—Ç–ø—Ä–∞–≤—å –µ—ë –¥—Ä—É–≥—É üì©");
      });
    }

    document.getElementById("next-btn").addEventListener("click", () => {
      if (currentQuestion < questions.length - 1) {
        currentQuestion++;
        loadQuestion();
      } else {
        showResult();
      }
    });

    document.getElementById("prev-btn").addEventListener("click", () => {
      if (currentQuestion > 0) {
        currentQuestion--;
        loadQuestion();
      }
    });
  </script>
</body>
</html>
